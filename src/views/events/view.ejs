<%- contentFor('title') %><%= event.name %>
<%- contentFor('body') %>
<div class="container mt-4">
    <h1><%= event.name %></h1>
    <div class="d-flex justify-content-between gap-4">
        <div class="flex-grow-1">
            <hr class="mt-0">
            <!-- Description -->
            <h4>Description</h4>
            <p>
                <% for (const line of event.description.split("\n")) { %>
                <%= line %><br>
                <% } %>
            </p>
            <!-- Date -->
        </div>
        <div class="d-flex flex-column gap-2">
            <div class="card">
                <div class="card-header">
                    Overview
                </div>
                <div class="card-body">
                    <span class="d-block"><b>Organizer</b></span>
                    <a href="/user/<%= event.organizer.username %>" class="text-decoration-none text-black">
                        <%= event.organizer.name %>
                        <span class="small d-block text-secondary text-decoration-underline">
                            @<%= event.organizer.username %>
                        </span>
                    </a>
                    <hr>
                    <span class="d-block"><b>Date</b></span>
                    <span class="d-block" data-time><%= event.date.toISOString() %></span>
                    <% if (event.location) { %>
                    <hr>
                    <span class="d-block"><b>Location</b></span>
                    <span class="d-block">
                        <!-- Preserve newlines in location -->
                        <% for (const line of event.location.split("\n")) { %>
                        <%= line %><br>
                        <% } %>
                    </span>
                    <% } %>
                    <hr>
                    <span class="d-block"><b>Attendees</b></span>
                    <span class="d-block">
                        <span class="badge bg-success me-1">Yes</span>
                        <span class="badge bg-secondary me-1">Maybe</span>
                        <span class="badge bg-danger me-1">No</span>
                    </span>
                </div>
            </div>
            <% if (event.organizer.id !== user.id) { %>
            <div class="card">
                <div class="card-header">
                    Attending
                </div>
                <div class="card-body">
                    <span style="max-width: 20vw;">Are you coming to "<%= event.name %>"?</span>
                    <form class="mt-3" action="/events/<%= event.uuid %>/respond" method="POST">
                        <input type="hidden" name="response" id="resp-input">
                        <div class="btn-group w-100">
                            <button class="btn btn-outline-success" id="resp-yes">Yes</button>
                            <button class="btn btn-outline-secondary" id="resp-maybe">Maybe</button>
                            <button class="btn btn-outline-danger" id="resp-no">No</button>
                        </div>
                    </form>
                </div>
            </div>
            <% } %>
        </div>
    </div>
</div>
<script src="/js/events/view.js"></script>